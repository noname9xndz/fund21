"use strict";var TEMPLATE_EVENT_INIT="init",TEMPLATE_EVENT_FORMAT_DATA="format_data",Template={_loadedTemplates:[],_dataVarName:"v",_dataAttrVarName:"av",define:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0!==this._loadedTemplates[e])return!1;var r=document.getElementById(e);if(null===r)return!1;var n=document.createDocumentFragment(),l=null;for(l="TABLE"===r.tagName?r.querySelector("tbody"):r;l.firstChild;)n.appendChild(l.firstChild);return this._loadedTemplates[e]={templateFragment:n,handlers:t,events:a,isTable:"TABLE"===r.tagName},!0},isTable:function(e){return this._loadedTemplates[e].isTable},create:function(e,t){var a={},r=[],n=this._dataVarName,l=this._dataAttrVarName;return void 0!==this._loadedTemplates[e]&&(a.id=e,a.content=this._loadedTemplates[e].templateFragment.cloneNode(!0),a.nodes=[].slice.call(a.content.childNodes,0),a.isTable="TABLE"===this._loadedTemplates[e].tagName,a.varElements=[],[].forEach.call(a.content.querySelectorAll("["+n+"]"),function(e){a.varElements[e.getAttribute(n)]=e}),a.attrVarElements=[],[].forEach.call(a.content.querySelectorAll("["+l+"]"),function(e){r=e.getAttribute(l).split(":"),a.attrVarElements[r[1]]={el:e,attr:r[0]}}),a.handlerElements=[],[].forEach.call(a.content.querySelectorAll("[data-handler]"),function(e){a.handlerElements.push(e)}),void 0!==t&&(a.relatedData=t),a)},parse:function(e,t){var a=Object.create(t);if(void 0===e||null===e)e=[];else if("object"!==(void 0===e?"undefined":babelHelpers.typeof(e)))return!1;void 0!==this._loadedTemplates[a.id].events[TEMPLATE_EVENT_FORMAT_DATA]&&(e=this._loadedTemplates[a.id].events[TEMPLATE_EVENT_FORMAT_DATA](e,a.relatedData)),a.escapedData=[];for(var r in e)a.escapedData[r]=this.nl2br(this.escape(e[r])),void 0!==a.varElements[r]&&(a.varElements[r].innerHTML=a.escapedData[r]),void 0!==a.attrVarElements[r]&&a.attrVarElements[r].el.setAttribute(a.attrVarElements[r].attr,e[r]);return a},escape:function(e){return String(e).replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},nl2br:function(e){return String(e).replace(/(\n)+/g,"<br>")},callHandlers:function(e){for(var t in e.handlerElements){var a=this._loadedTemplates[e.id].handlers[e.handlerElements[t].getAttribute("data-handler")];if(void 0===a)return!1;a(e.handlerElements[t],e.escapedData,e.nodes)}},append:function(e,t){if(null===t||void 0===t)return!1;var a=null;return a=this.isTable(e.id)?t.querySelector("tbody"):t,a.appendChild(e.content),this.callHandlers(e),e.nodes},insert:function(e,t,a){return this.append(this.parse(t,this.create(e)),a)},insertAll:function(e,t,a){for(var r=document.createDocumentFragment(),n=[],l=0;l<t.length;l++){var i=this.create(e);i=this.parse(t[l],i),r.appendChild(i.content),n.push(i)}var d=null;for(d=this.isTable(e)?a.querySelector("tbody"):a,d.appendChild(r),l=0;l<n.length;l++)this.callHandlers(n[l])},insertAdjacencyList:function(e,t,a,r,n,l){void 0!==r&&null!==r||(r="parent_id"),(void 0===l||null===l||"asc"!==l&&"desc"!==l)&&(l="asc");var i={_0:{}};i._0._rendered=!1,i._0.id=0;for(var d in t)i["_"+t[d].id]=t[d],i["_"+t[d].id]._rendered=!1;for(var d in t){var s=i["_"+t[d].id][r];void 0===i["_"+s]._children_ids&&(i["_"+s]._children_ids=[]),i["_"+s]._children_ids.push(t[d].id)}var o=document.createDocumentFragment(),c=[],_=function e(t){if(t.parent_id>0){var a={};return a=i["_"+t.parent_id],i["_"+t.parent_id].parent_id>0&&(a.parent=e(i["_"+t.parent_id])),a}};for(function t(a,r){if(a._rendered===!1)if(a._rendered=!0,0===a.id)for(var l in a._children_ids)t(i["_"+a._children_ids[l]],r);else{var d=_(a),s=Template.create(e,d);if(s=Template.parse(a,s),c.push(s),void 0!==a._children_ids)for(var l in a._children_ids)s.content.querySelector("."+n),t(i["_"+a._children_ids[l]],s.content.querySelector("."+n));r.appendChild(s.content)}}(i._0,o),a.appendChild(o),d=0;d<c.length;d++)this.callHandlers(c[d])}};