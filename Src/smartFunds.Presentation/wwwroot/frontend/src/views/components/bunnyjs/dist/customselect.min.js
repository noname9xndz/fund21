var CustomSelectConfig=Object.assign({},DropdownConfig,{useTagNames:!0,tagName:"customselect",roleMenu:"textbox",roleMenuItem:"option"}),CustomSelectUI=Object.assign({},DropdownUI,{Config:CustomSelectConfig,getHiddenSelect:function(e){return e.getElementsByTagName("select")[0]||!1},createHiddenSelect:function(e,t){var n=this,i=document.createElement("select");i.setAttribute("hidden",""),i.setAttribute("role","textbox");for(var s in e)i.setAttribute(s,e[s]);return[].forEach.call(t,function(e){var t=document.createElement("option"),s=n.getItemValue(e);if(void 0===s)throw new Error("CustomSelect: each item must have data-value attribute");t.value=s,e.hasAttribute("aria-selected")&&t.setAttribute("selected",""),i.appendChild(t)}),i},syncUI:function(e,t,n){var i=this,s=this.getMenuItems(e),l=this.getToggleBtn(e),u=!1;[].forEach.call(s,function(s){if(""!==t){var r=i.getItemValue(s);if(n){for(var o=0;o<t.length;o++)if(t[o]==r){i.setItemActive(s),u=!0,i.getOptionByValue(e,r).selected=!0;break}}else r==t&&(i.setItemActive(s),u=!0,i.getOptionByValue(e,r).selected=!0,""===l.innerHTML&&(l.innerHTML=s.innerHTML))}else s.hasAttribute("aria-selected")?(i.setItemActive(s),u=!0,""===l.innerHTML&&(l.innerHTML=s.innerHTML)):s.classList.contains(i.Config.classNameActive)&&i.setItemInactive(s)}),u||(this.setItemActive(s[0]),this.getHiddenSelect(e).options[0].setAttribute("selected",""),""===l.innerHTML&&(l.innerHTML=s[0].innerHTML))},insertHiddenSelect:function(e,t){e.appendChild(t)},getItemByValue:function(e,t){return this.getMenu(e).querySelector('[data-value="'+t+'"]')||!1},getLabelByValue:function(e,t){return this.getItemByValue(e,t).innerHTML},getOptionByValue:function(e,t){return this.getHiddenSelect(e).querySelector('[value="'+t+'"]')||!1},setToggleByValue:function(e,t){var n=this.getToggleBtn(e),i=this.getItemByValue(e,t);n.innerHTML=i.innerHTML}}),CustomSelect=Object.assign({},Dropdown,{UI:CustomSelectUI,Config:CustomSelectConfig,init:function(e){if(void 0!==e.__bunny_customselect)return!1;if(void 0===e.dataset.name)throw new Error("CustomSelect: data-name attribute missing");if(!this.UI.getMenu(e))throw new Error("CustomSelect: no menu found!");if(!this.UI.getToggleBtn(e))throw new Error("CustomSelect: toggle button not found!");e.__bunny_customselect={};var t=this.UI.createHiddenSelect(this.getAttributesForSelect(e),this.UI.getMenuItems(e),this.UI.getToggleBtn(e).textContent);this.UI.insertHiddenSelect(e,t);var n=this.getDefaultValue(e);return this.UI.syncUI(e,n,this.isMultiple(e)),this._addCustomSelectEvents(e),this._setARIA(e),initObjectExtensions(this,e),!0},_addCustomSelectEvents:function(e){var t=this;this.onItemSelect(e,function(n){null!==n&&t.select(e,t.UI.getItemValue(n))})},getAttributesForSelect:function(e){var t={};for(var n in e.dataset)t[n]=e.dataset[n];return t},getDefaultValue:function(e){var t=e.getAttribute("value");if(null===t)return"";var n=t[0];return void 0===n?"":"["===n?JSON.parse(t):t},isMultiple:function(e){return void 0!==e.dataset.multiple},select:function(e,t){var n=this.UI.getOptionByValue(e,t);if(this.isMultiple(e))if(n.selected)this.deselect(e,t);else{var i=this.UI.getItemByValue(e,t);this.UI.setItemActive(i),n.selected=!0}else if(!n.selected){var s=this.getSelectedValue(e);s!=t&&this.deselect(e,s);var l=this.UI.getItemByValue(e,t);this.UI.setItemActive(l),n.selected=!0,this.UI.setToggleByValue(e,t)}},deselect:function(e,t){var n=this.UI.getOptionByValue(e,t);if(n.selected){var i=this.UI.getItemByValue(e,t);this.UI.setItemInactive(i),n.selected=!1}},getSelectedValue:function(e){var t=this.UI.getHiddenSelect(e);if(this.isMultiple(e)){var n=[];return[].forEach.call(t.options,function(e){e.selected&&n.push(e.value)}),n}return t.options[t.selectedIndex].value}});document.addEventListener("DOMContentLoaded",function(){CustomSelect.initAll()});